import{importShared as e}from"./__federation_fn_import-D8XbxH1x.js";const l=[];for(let se=0;se<256;++se)l.push((se+256).toString(16).slice(1));let t;const a=new Uint8Array(16);const u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function n(e,n,o){if(u.randomUUID&&!e)return u.randomUUID();const i=(e=e||{}).random??e.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(a)}();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(i)}const{defineComponent:o}=await e("vue"),{toDisplayString:i,createElementVNode:d,resolveComponent:s,withModifiers:r,createVNode:c,withCtx:m,createTextVNode:v,vShow:p,withDirectives:f,openBlock:_,createBlock:g,createCommentVNode:y}=await e("vue"),{computed:b,ref:w,watch:h}=await e("vue"),x=(e,l)=>{const t=e.__vccOpts||e;for(const[a,u]of l)t[a]=u;return t},V=x(o({__name:"RuleCard",props:{rule:{type:Object,required:!0},index:{type:Number,required:!0},notifications:{type:Object,default:()=>[]},rules:{type:Array,required:!0},templates:{type:Array,default:()=>[]},frameitems:{type:Array,default:()=>[]}},emits:["save","delete","alert"],setup(e,{emit:l}){const t=e,a=l,u=w(!1),n=w({...t.rule}),o=w(null),x=w(""),V=w(""),C=b((()=>[{title:"跟随系统",value:"",subtitle:"使用系统消息渠道配置"},...t.notifications.map((e=>({title:e.name,value:e.name,subtitle:e.type})))])),k=[{title:"跟随系统",value:"",disabled:!1},{value:"资源下载",title:"资源下载",disabled:!1},{value:"整理入库",title:"整理入库",disabled:!1},{value:"订阅",title:"订阅",disabled:!1},{value:"站点",title:"站点",disabled:!1},{value:"媒体服务器",title:"媒体服务器",disabled:!1},{value:"手动处理",title:"手动处理",disabled:!1},{value:"插件",title:"插件",disabled:!1},{value:"其它",title:"其它",disabled:!1}],U=b((()=>{if(!n.value.target)return k;const e=t.notifications.find((e=>e.name===n.value.target));let l=[];return e&&e.switchs&&(l=e.switchs),[...k.map((e=>({...e,disabled:""!==e.value&&void 0!==e.value&&!l.includes(e.value)})))]})),N=b((()=>{const e=[{title:"正则匹配",value:"regex",subtitle:"使用正则表达式提取信息"},{title:"上下文模式",value:"frame",subtitle:"使用调用帧(Frame)获取局部变量"},...t.frameitems.filter((e=>e.switch===n.value.switch))],l=e.slice(0,1),a={"资源下载":[{title:"资源下载",value:"downloadAdded"}],"整理入库":[{title:"资源入库",value:"organizeSuccess"}],"订阅":[{title:"订阅添加",value:"subscribeAdded"},{title:"订阅完成",value:"subscribeComplete"}]}[n.value.switch];return a?[...a,...l]:e}));function A(){o.value=t.index,u.value=!0}function E(){n.value.name.trim()?n.value.type?.trim()?(n.value.template_id?.trim()||a("alert","未选择模板, 将使用系统默认","warning"),a("save",n.value,o.value),u.value=!1):a("alert","规则类型不能为空","error"):a("alert","规则名称不能为空","error")}function S(){n.value={...t.rule},u.value=!1}return h((()=>t.rule),(e=>{n.value={...e}})),h((()=>n.value.switch),((e,l)=>{if(void 0!==l&&e!==l){N.value.map((e=>e.value)).includes(n.value.type)||(n.value.type=void 0)}})),h((()=>n.value.type),((e,l)=>{const t={downloadAdded:"资源下载",organizeSuccess:"整理入库",subscribeAdded:"订阅",subscribeComplete:"订阅"}[e];t&&(n.value.switch=t,n.value.yaml_content=""),"regex"===l&&n.value.yaml_content?x.value=n.value.yaml_content:"frame"===l&&n.value.yaml_content&&(V.value=n.value.yaml_content),"regex"===e&&x.value?n.value.yaml_content=x.value:"frame"===e&&V.value?n.value.yaml_content=V.value:n.value.yaml_content={regex:"\n# extractors 中 除field外, 其余所有字段都将作为消息模板中的可用参数\n# MetaBase 如果需要获取媒体信息必须绑定title, 否则消息模板中的可用参数仅有extractors中匹配的字段\n# 详见: https://github.com/wikrin/MoviePilot-Plugins/blob/main/frontend/notifyext/README.md\nextractors:\n  - field: 'title'\n    org_msg_title: '.*'\n\nMetaBase:\n  - title: ''\n",frame:"\n# 详见: https://github.com/wikrin/MoviePilot-Plugins/blob/main/frontend/notifyext/README.md\nFrame:\n  cls_name: ''      # 目标帧类名\n  method_name: ''   # 帧方法名\n  depth: 15         # 最大遍历深度\n  skip: 2           # 跳过层数\n  required: []      # 目标局部变量中要存在的变量名\n"}[e]||""})),h((()=>n.value.target),(e=>{const l=t.notifications.find((l=>l.name===e));let a=[];l&&l.switchs&&(a=l.switchs),n.value.switch&&!a.includes(n.value.switch)&&(n.value.switch="")})),(l,a)=>{const o=s("v-btn"),b=s("v-card-title"),w=s("v-divider"),h=s("v-switch"),x=s("v-col"),V=s("v-text-field"),k=s("v-select"),j=s("v-row"),q=s("v-alert"),D=s("v-container"),I=s("V-ace-editor"),M=s("v-card-text"),z=s("v-card"),B=s("v-form"),O=s("v-spacer"),$=s("v-card-actions"),R=s("v-dialog");return _(),g(z,{class:"rule-card rounded-lg",elevation:"2",onClick:A},{default:m((()=>[c(b,{class:"d-flex justify-space-between align-center py-2 px-3 bg-grey-lighten-3"},{default:m((()=>[d("span",null,i(e.rule.name),1),c(o,{icon:"mdi-delete",size:"x-small",color:"grey",onClick:a[0]||(a[0]=r((t=>l.$emit("delete",e.index)),["stop"]))})])),_:1}),c(R,{modelValue:u.value,"onUpdate:modelValue":a[12]||(a[12]=e=>u.value=e),"max-width":"50rem",scrollable:""},{default:m((()=>[n.value?(_(),g(z,{key:0},{default:m((()=>[c(b,{class:"bg-primary-lighten-5"},{default:m((()=>[v("编辑规则 "+i(n.value.name),1)])),_:1}),c(w),c(M,{class:"py-4"},{default:m((()=>[c(B,{onSubmit:r(E,["prevent"])},{default:m((()=>[c(D,{fluid:""},{default:m((()=>[a[14]||(a[14]=d("h3",{class:"text-h6 mb-3"},"基础配置",-1)),c(j,null,{default:m((()=>[c(x,{cols:"12",md:"4"},{default:m((()=>[c(h,{modelValue:n.value.enabled,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.enabled=e),label:"启用规则",inset:""},null,8,["modelValue"])])),_:1}),c(x,{cols:"12",md:"4"},{default:m((()=>[c(V,{modelValue:n.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.name=e),label:"配置名",onInput:a[3]||(a[3]=e=>function(e){const l=e.name?.trim();if(!l)return;t.rules.filter((e=>e.name===l)).length>1?e.duplicateName=!0:delete e.duplicateName}(n.value)),required:"",outlined:""},null,8,["modelValue"])])),_:1}),c(x,{cols:"12",md:"4"},{default:m((()=>[c(k,{modelValue:n.value.target,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.target=e),items:C.value,"item-props":e=>({subtitle:e.subtitle}),label:"目标渠道",clearable:"",outlined:""},null,8,["modelValue","items","item-props"])])),_:1})])),_:1}),c(j,null,{default:m((()=>[c(x,{cols:"12",md:"4"},{default:m((()=>[c(k,{modelValue:n.value.switch,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.switch=e),items:U.value,"item-title":"title","item-value":"value","item-props":e=>({disabled:e.disabled,subtitle:e.subtitle}),label:"通知类型",outlined:""},null,8,["modelValue","items","item-props"])])),_:1}),c(x,{cols:"12",md:"4"},{default:m((()=>[c(k,{modelValue:n.value.type,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.type=e),items:N.value,"item-props":e=>({subtitle:e.subtitle}),label:"规则类型",outlined:""},null,8,["modelValue","items","item-props"])])),_:1}),c(x,{cols:"12",md:"4"},{default:m((()=>[c(k,{modelValue:n.value.template_id,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.template_id=e),items:e.templates,label:"选择模板",clearable:"",outlined:""},null,8,["modelValue","items"])])),_:1})])),_:1}),c(w),a[15]||(a[15]=d("h3",{class:"text-h6 py-6"},"消息聚合配置",-1)),c(j,null,{default:m((()=>[c(x,{cols:"12",md:"6"},{default:m((()=>[c(V,{modelValue:n.value.aggregate.exclude,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.aggregate.exclude=e),label:"排除(关键字、正则表达式)",required:"",outlined:""},null,8,["modelValue"])])),_:1}),c(x,{cols:"12",md:"6"},{default:m((()=>[c(V,{modelValue:n.value.aggregate.include,"onUpdate:modelValue":a[9]||(a[9]=e=>n.value.aggregate.include=e),label:"包含(关键字、正则表达式)",required:"",outlined:""},null,8,["modelValue"])])),_:1}),c(x,{cols:"12",md:"3"},{default:m((()=>[c(V,{modelValue:n.value.aggregate.wait_time,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.aggregate.wait_time=e),label:"等待时间(分钟)",type:"number",oninput:"this.value = this.value.replace(/[^0-9]/g, '')",required:"",outlined:""},null,8,["modelValue"])])),_:1}),c(x,{cols:"12",md:"9"},{default:m((()=>[c(q,{type:"info"},{default:m((()=>a[13]||(a[13]=[v(" 等待时间内未收到符合条件的新消息时,将发送已聚合消息。 ")]))),_:1,__:[13]})])),_:1})])),_:1})])),_:1,__:[14,15]}),f(c(z,null,{default:m((()=>[c(b,null,{default:m((()=>a[16]||(a[16]=[v("YAML 编辑")]))),_:1,__:[16]}),c(M,{class:"py-0"},{default:m((()=>[c(I,{value:n.value.yaml_content,"onUpdate:value":a[11]||(a[11]=e=>n.value.yaml_content=e),lang:"yaml",class:"w-full h-full min-h-[30rem] rounded"},null,8,["value"])])),_:1})])),_:1},512),[[p,"regex"===n.value.type||"frame"===n.value.type]])])),_:1})])),_:1}),c(w),c($,null,{default:m((()=>[c(O),c(o,{color:"grey",onClick:S},{default:m((()=>a[17]||(a[17]=[v("取消")]))),_:1,__:[17]}),c(o,{color:"primary",onClick:E},{default:m((()=>a[18]||(a[18]=[v("保存")]))),_:1,__:[18]})])),_:1})])),_:1})):y("",!0)])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-b6f37acf"]]),{defineComponent:C}=await e("vue"),{toDisplayString:k,createElementVNode:U,resolveComponent:N,withModifiers:A,createVNode:E,withCtx:S,createTextVNode:j,openBlock:q,createBlock:D,createCommentVNode:I}=await e("vue"),{ref:M,watch:z}=await e("vue"),B=x(C({__name:"TemplateCard",props:{template:{type:Object,required:!0},index:{type:Number,required:!0},templates:{type:Array,required:!0}},emits:["save","delete","alert"],setup(e,{emit:l}){const t=e,a=l,u=M(!1),n=M(),o=M(null);function i(){n.value={...t.template},o.value=t.index,u.value=!0}function d(){n.value.name.trim()?(a("save",n.value,o.value),u.value=!1):a("alert","模板名称不能为空","error")}function s(){u.value=!1}return z((()=>t.template),(e=>{n.value={...e}})),(l,t)=>{const a=N("v-btn"),o=N("v-card-title"),r=N("v-divider"),c=N("v-text-field"),m=N("v-col"),v=N("v-row"),p=N("V-ace-editor"),f=N("v-card-text"),_=N("v-card"),g=N("v-form"),y=N("v-spacer"),b=N("v-card-actions"),w=N("v-dialog");return q(),D(_,{class:"template-card rounded-lg",elevation:"2",onClick:i},{default:S((()=>[E(o,{class:"d-flex justify-space-between align-center py-2 px-3 bg-grey-lighten-3"},{default:S((()=>[U("span",null,k(e.template.name),1),E(a,{icon:"mdi-delete",size:"x-small",color:"grey",onClick:t[0]||(t[0]=A((t=>l.$emit("delete",e.index)),["stop"]))})])),_:1}),E(w,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),"max-width":"50rem",scrollable:""},{default:S((()=>[n.value?(q(),D(_,{key:0},{default:S((()=>[E(o,{class:"bg-primary-lighten-5"},{default:S((()=>[j("编辑模板 "+k(n.value.name),1)])),_:1}),E(r),E(f,{class:"py-4"},{default:S((()=>[E(g,{onSubmit:A(d,["prevent"])},{default:S((()=>[E(v,{dense:""},{default:S((()=>[E(m,{cols:"12"},{default:S((()=>[E(c,{modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.name=e),label:"模板名称",required:"",dense:"",outlined:""},null,8,["modelValue"])])),_:1})])),_:1}),E(_,null,{default:S((()=>[E(o,null,{default:S((()=>t[4]||(t[4]=[j("模板内容")]))),_:1,__:[4]}),E(f,{class:"py-0"},{default:S((()=>[E(p,{value:n.value.template,"onUpdate:value":t[2]||(t[2]=e=>n.value.template=e),lang:"json",class:"w-full h-full min-h-[30rem] rounded"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),E(r),E(b,null,{default:S((()=>[E(y),E(a,{color:"grey",onClick:s},{default:S((()=>t[5]||(t[5]=[j("取消")]))),_:1,__:[5]}),E(a,{color:"primary",onClick:d},{default:S((()=>t[6]||(t[6]=[j("保存")]))),_:1,__:[6]})])),_:1})])),_:1})):I("",!0)])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-7185c571"]]),{defineComponent:O}=await e("vue"),{resolveComponent:$,createVNode:R,createElementVNode:P,withCtx:T,toDisplayString:F,createTextVNode:L,openBlock:G,createBlock:Y,createCommentVNode:H,renderList:J,Fragment:K,createElementBlock:Q,withModifiers:W}=await e("vue"),X={class:"plugin-config"},Z={class:"setting-item d-flex align-center justify-space-between pa-3 bg-grey-lighten-3 rounded"},ee={class:"d-flex align-center"},le={class:"setting-item d-flex align-center justify-space-between pa-3 bg-grey-lighten-3 rounded"},te={class:"rules-tab"},ae={class:"templates-tab"},{ref:ue,reactive:ne,onMounted:oe,computed:ie}=await e("vue"),de=x(O({__name:"Config",props:{api:{type:Object,required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["close","save"],setup(e,{emit:l}){const t=e,a=l,u=ne({enabled:!1,cooldown:0}),o=ne({...u}),i=ue([]),d=ue([]),s=ue(!1),r=ue("");let c;const m=ue("rules"),v=ue(!0),p=ue(null),f=ue(null),_=ue(null),g=ue(!1),y=ue([]),b=ue([]);const w=ne({show:!1,text:"",color:"success",timeout:3e3});function h(e,l="success"){w.text=e,w.color=l,w.show=!0}function x(){s.value=!1,c(!0)}function C(){s.value=!1,c(!1)}const k=ie((()=>d.value.map((e=>({title:e.name,value:e.id})))));function U(){return n()}function N(){let e=`规则${i.value.length+1}`;for(;i.value.some((l=>l.name===e));)e=`规则${parseInt(e.split("规则")[1])+1}`;i.value.push({id:U(),name:e,enabled:!1,switch:"",aggregate:{wait_time:5},target:""})}function A(e,l){null===l?i.value.push(e):i.value[l]=e}function E(e){i.value.splice(e,1)}function S(){let e=`模板${d.value.length+1}`;for(;d.value.some((l=>l.name===e));)e=`模板${parseInt(e.split("模板")[1])+1}`;d.value.push({id:U(),name:e,template:"{\n  'title': '',\n  'text': ''\n}"})}function j(e,l){null===l?d.value.push(e):d.value[l]=e}async function q(e){const l=d.value[e],t=i.value.filter((e=>["organizeSuccess","downloadAdded","subscribeAdded","subscribeComplete"].some((t=>e[t]===l.id))));if(t.length>0){if(!(await(a=`该模板正在以下 ${t.length} 条规则中被引用：\n${t.map((e=>e.name)).join(", ")}\n\n确定要删除吗？`,r.value=a,s.value=!0,new Promise((e=>{c=e})))))return}var a;i.value.forEach(((e,t)=>{const a=["organizeSuccess","downloadAdded","subscribeAdded","subscribeComplete"].find((t=>e[t]===l.id));a&&(i.value[t]={...e,[a]:void 0})})),d.value.splice(e,1)}async function D(){g.value=!0,f.value=null;try{await async function(){try{await t.api.post("plugin/NotifyExt/rules",i.value),_.value="规则保存成功"}catch(e){console.log(e)}}(),await async function(){try{await t.api.post("plugin/NotifyExt/templates",d.value),_.value="模板保存成功"}catch(e){console.log(e)}}(),a("save",{...o}),_.value="配置保存成功"}catch(e){console.error("保存配置失败:",e),f.value=e.message||"保存配置失败"}finally{g.value=!1}}function I(){Object.keys(u).forEach((e=>{o[e]=u[e]})),p.value&&p.value.resetValidation()}return oe((()=>{t.initialConfig&&Object.keys(t.initialConfig).forEach((e=>{e in o&&(o[e]=t.initialConfig[e])})),async function(){try{const e=await t.api.get("system/setting/Notifications");y.value=e.data?.value??[]}catch(e){console.log(e)}}(),async function(){try{const e=await t.api.get("plugin/NotifyExt/templates");d.value=e??[]}catch(e){console.log(e)}}(),async function(){try{const e=await t.api.get("plugin/NotifyExt/rules");i.value=e??[]}catch(e){console.log(e)}}(),async function(){try{const e=await t.api.get("plugin/NotifyExt/frameitems");b.value=e??[]}catch(e){console.log(e)}}()})),(e,l)=>{const t=$("v-icon"),u=$("v-card-title"),n=$("v-alert"),c=$("v-switch"),U=$("v-col"),M=$("v-text-field"),z=$("v-row"),O=$("v-card-text"),ue=$("v-card"),ne=$("v-tab"),oe=$("v-tabs"),ie=$("VIcon"),de=$("VBtn"),se=$("VBtnGroup"),re=$("VForm"),ce=$("VCardText"),me=$("v-window-item"),ve=$("v-window"),pe=$("v-form"),fe=$("v-spacer"),_e=$("v-btn"),ge=$("v-card-actions"),ye=$("v-dialog"),be=$("v-snackbar");return G(),Q("div",X,[R(ue,{flat:"",class:"rounded border"},{default:T((()=>[R(u,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:T((()=>[R(t,{icon:"mdi-cog",class:"mr-2",color:"primary",size:"small"}),l[10]||(l[10]=P("span",null,"消息通知扩展配置",-1))])),_:1,__:[10]}),R(O,{class:"px-3 py-2"},{default:T((()=>[f.value?(G(),Y(n,{key:0,type:"error",density:"compact",class:"mb-2 text-caption",variant:"tonal",closable:""},{default:T((()=>[L(F(f.value),1)])),_:1})):H("",!0),_.value?(G(),Y(n,{key:1,type:"success",density:"compact",class:"mb-2 text-caption",variant:"tonal",closable:""},{default:T((()=>[L(F(_.value),1)])),_:1})):H("",!0),R(pe,{ref_key:"form",ref:p,modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=e=>v.value=e),onSubmit:W(D,["prevent"])},{default:T((()=>[R(ue,{flat:"",class:"rounded mb-3 border config-card"},{default:T((()=>[R(O,{class:"px-3 py-2"},{default:T((()=>[R(z,{dense:"","no-gutters":""},{default:T((()=>[R(U,{cols:"12",md:"6",class:"pr-md-2 pb-2"},{default:T((()=>[P("div",Z,[P("div",ee,[R(t,{icon:"mdi-power",size:"small",color:o.enabled?"info":"grey",class:"mr-3"},null,8,["color"]),l[11]||(l[11]=P("span",{class:"text-subtitle-2"},"启用插件",-1))]),R(c,{modelValue:o.enabled,"onUpdate:modelValue":l[0]||(l[0]=e=>o.enabled=e),color:"info",inset:"",density:"compact","hide-details":"",class:"small-switch"},null,8,["modelValue"])])])),_:1}),R(U,{cols:"12",md:"6",class:"pl-md-2 pb-2"},{default:T((()=>[P("div",le,[l[12]||(l[12]=P("div",{class:"d-flex align-center"},[P("span",{class:"text-subtitle-2"},"重复消息控制(分钟)")],-1)),R(M,{modelValue:o.cooldown,"onUpdate:modelValue":l[1]||(l[1]=e=>o.cooldown=e),modelModifiers:{number:!0},density:"compact","hide-details":"",style:{"max-width":"150px"},onInput:l[2]||(l[2]=e=>o.cooldown=e.replace(/[^0-9]/g,""))},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])),_:1}),R(ue,{flat:"",class:"rounded mb-3 border config-card"},{default:T((()=>[R(O,{class:"px-3 py-2"},{default:T((()=>[R(oe,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),class:"mb-3",density:"compact","fixed-tabs":""},{default:T((()=>[R(ne,{value:"rules"},{default:T((()=>l[13]||(l[13]=[L("消息规则")]))),_:1,__:[13]}),R(ne,{value:"templates"},{default:T((()=>l[14]||(l[14]=[L("消息模板")]))),_:1,__:[14]})])),_:1},8,["modelValue"]),R(ve,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value=e)},{default:T((()=>[R(me,{value:"rules"},{default:T((()=>[P("div",te,[i.value&&i.value.length>0?(G(),Y(z,{key:0},{default:T((()=>[(G(!0),Q(K,null,J(i.value,((e,l)=>(G(),Y(U,{key:e.id,cols:"12",md:"6",lg:"4"},{default:T((()=>[R(V,{rule:e,index:l,notifications:y.value,rules:i.value,templates:k.value,frameitems:b.value,onAlert:h,onSave:A,onDelete:E},null,8,["rule","index","notifications","rules","templates","frameitems"])])),_:2},1024)))),128))])),_:1})):(G(),Y(z,{key:1},{default:T((()=>[R(U,{cols:"12"},{default:T((()=>[R(n,{type:"info",variant:"tonal",icon:"mdi-information"},{default:T((()=>l[15]||(l[15]=[L(" 暂无规则，请点击下方按钮添加新规则 ")]))),_:1,__:[15]})])),_:1})])),_:1})),R(ce,null,{default:T((()=>[R(re,{onSubmit:W((()=>{}),["prevent"])},{default:T((()=>[R(se,{density:"comfortable",class:"d-flex flex-wrap gap-4 mt-4"},{default:T((()=>[R(de,{color:"success",variant:"tonal",onClick:N},{default:T((()=>[R(ie,{icon:"mdi-plus"})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1}),R(me,{value:"templates"},{default:T((()=>[P("div",ae,[d.value&&d.value.length>0?(G(),Y(z,{key:0},{default:T((()=>[(G(!0),Q(K,null,J(d.value,((e,l)=>(G(),Y(U,{key:e.id,cols:"12",md:"6",lg:"4"},{default:T((()=>[R(B,{template:e,index:l,templates:d.value,onAlert:h,onSave:j,onDelete:q},null,8,["template","index","templates"])])),_:2},1024)))),128))])),_:1})):(G(),Y(z,{key:1},{default:T((()=>[R(U,{cols:"12"},{default:T((()=>[R(n,{type:"info",variant:"tonal",icon:"mdi-information"},{default:T((()=>l[16]||(l[16]=[L(" 暂无消息模板，请点击下方按钮添加新模板 ")]))),_:1,__:[16]})])),_:1})])),_:1})),R(ce,null,{default:T((()=>[R(re,{onSubmit:W((()=>{}),["prevent"])},{default:T((()=>[R(se,{density:"comfortable",class:"d-flex flex-wrap gap-4 mt-4"},{default:T((()=>[R(de,{color:"success",variant:"tonal",onClick:S},{default:T((()=>[R(ie,{icon:"mdi-plus"})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),R(ye,{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value=e),"max-width":"400"},{default:T((()=>[R(ue,null,{default:T((()=>[R(u,{class:"text-h6"},{default:T((()=>l[17]||(l[17]=[L("确认操作")]))),_:1,__:[17]}),R(O,null,{default:T((()=>[L(F(r.value),1)])),_:1}),R(ge,null,{default:T((()=>[R(fe),R(_e,{color:"grey",text:"",onClick:C},{default:T((()=>l[18]||(l[18]=[L("取消")]))),_:1,__:[18]}),R(_e,{color:"primary",onClick:x},{default:T((()=>l[19]||(l[19]=[L("确定")]))),_:1,__:[19]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),R(be,{modelValue:w.show,"onUpdate:modelValue":l[8]||(l[8]=e=>w.show=e),color:w.color,timeout:w.timeout},{actions:T((()=>[R(_e,{variant:"text",onClick:l[7]||(l[7]=e=>w.show=!1)},{default:T((()=>l[20]||(l[20]=[L(" 关闭 ")]))),_:1,__:[20]})])),default:T((()=>[L(F(w.text)+" ",1)])),_:1},8,["modelValue","color","timeout"]),R(ge,{class:"px-2 py-1"},{default:T((()=>[R(fe),R(_e,{color:"secondary",variant:"text",onClick:I,"prepend-icon":"mdi-restore",size:"small"},{default:T((()=>l[21]||(l[21]=[L("恢复默认")]))),_:1,__:[21]}),R(_e,{color:"primary",disabled:!v.value||g.value,onClick:D,loading:g.value,"prepend-icon":"mdi-content-save",variant:"text",size:"small"},{default:T((()=>l[22]||(l[22]=[L("保存配置")]))),_:1,__:[22]},8,["disabled","loading"]),R(_e,{color:"grey",onClick:l[9]||(l[9]=e=>a("close")),"prepend-icon":"mdi-close",variant:"text",size:"small"},{default:T((()=>l[23]||(l[23]=[L("关闭")]))),_:1,__:[23]})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-a6b4066b"]]);export{de as default};
